---
title: Liaison du formulaire
description: Apprenez √† lier un formulaire √† une variable dans Angular
---

import { Steps } from '@astrojs/starlight/components';
import Objective from '../../../../../components/learning-objective.astro';

<Objective class="drop-shadow-xl" objectives={[
{mainTitle: 'Objectifs de ce chapitre', title: 'Liaison de votre formulaire HTML', description: 'Apprenez √† lier un formulaire √† une variable dans Angular.'},
]} />

Pour l'instant, la saisie du formulaire est r√©alisable. Il vous faut, maintenant, r√©cup√©rer les donn√©es du formulaire pour cr√©er une nouvelle t√¢che et l'ajouter √† la liste existante.

## API Forms Angular

Angular fournit 2 API diff√©rentes pour travailler avec des formulaires¬†:

- Template-driven Forms
- Reactive Forms

Dans ce cours, vous utiliserez l'API Template-driven Forms pour lier le formulaire.

## Template-driven Forms

Que veut dire **pilot√© par le Template HTML** ?

La structure du formulaire et les validations sont d√©finies dans la vue (Template HTML). Les formulaires bas√©s sur des Template HTML sont faciles √† utiliser et adapt√©s aux formulaires simples.
C√¥t√© Angular, notre objectif est de lier chaque champ √† une propri√©t√© pour r√©cup√©rer sa valeur actuelle.

## Type TaskForm

Vous allez cr√©er un nouveau type **TaskForm** pour repr√©senter le formulaire d'une t√¢che. Le type **TaskForm** aura deux propri√©t√©s : **title** et **description**.
Sa forme est diff√©rente de l'interface **Task** que vous avez cr√©√©e pr√©c√©demment. Vous allez en cr√©er une nouvelle d√©riv√©e √† partir de l'interface **Task** existante.

### Choisissez le type d'utilitaire TypeScript

Le type d'utilitaire TypeScript **Pick** vous permet de cr√©er un nouveau type en s√©lectionnant certaines propri√©t√©s d'un type existant.
L'avantage d'utiliser le type d'utilitaire  **Pick** est qu'il vous aide √† √©viter de dupliquer les propri√©t√©s du type existant.

Vous lui transmettez le type d'origine et les propri√©t√©s que vous souhaitez s√©lectionner.

```ts
// task.model.ts
export type TaskForm = Pick<Task, 'title' | 'description'>;

```

### üéì Instructions

<Steps>

1. Ouvrez le fichier `src/app/models/task.model.ts`.

2. Ajoutez le code suivant en dessous de l'existant:

    ```typescript
    // task.model.ts
    export type TaskForm = Pick<Task, 'title' | 'description'>;
    ```

3. Importer la fonctionnalit√© de formulaires dans Angular avec le module **FormsModule**

    ```typescript ins={"Importer FormsModule": 3-4} ins={"Ajouter FormsModule dans le tableau des imports": 16-17}
    // app.module.ts
    import { NgModule } from '@angular/core';

    import {FormsModule} from "@angular/forms";

    @NgModule({
    declarations: [
    AppComponent,
    TaskListComponent,
    TaskFormComponent
    ],
    imports: [
    BrowserModule,
    AppRoutingModule,
    NgbModule,

    FormsModule
    ],
    providers: [],
    bootstrap: [AppComponent]
    })
    export class AppModule { }

    ```

4. Modifiez le fichier `src/app/task-form/task-form.component.ts`.

    ```typescript ins={"Importez le nouveau type TaskForm": 3-4} ins={"Ajoutez la variable task avec des valeurs vides": 12-16}
    // task-form.component.ts
    import { Component } from '@angular/core';

    import {TaskForm} from '../model/task.model';

    @Component({
      selector: 'app-task-form',
      templateUrl: './task-form.component.html',
      styleUrls: ['./task-form.component.css']
    })
    export class TaskFormComponent {

      task: TaskForm = {
        title: '',
        description: ''
      };
    }
    ```

</Steps>

## Liaison du formulaire

Pour lier un formulaire √† votre nouvelle variable **task** dans Angular, vous pouvez utiliser la directive `[ngModel]`.
La directive `[ngModel]` est une directive int√©gr√©e qui vous permet de lier une entr√©e de formulaire √† une variable.
Mais cela ne suffira pas pour votre cas d'utilisation : cela vous permet uniquement de lier la valeur de la propri√©t√© au champ, et non de mettre √† jour la variable en fonction des saisies de l'utilisateur.

### Liaison de donn√©es bidirectionnelle

Pour mettre √† jour votre variable **task** lorsque le formulaire est mis √† jour, vous devez utiliser le format `[(ngModel)]`.
Cette syntaxe nous permet de¬†:

- lier la valeur de la t√¢che au champ du formulaire;
- mettre √† jour la valeur de la t√¢che en fonction de la saisie de l'utilisateur.

:::tip
`[(ngModel)]` ü§î `([ngModel])` ? Pour se rappeler de l'ordre des parenth√®ses et des crochets ? 

Pensez **banana in a box** [()] 

`[(ngModel)]` ‚úÖ
:::

A pr√©sent, il faut lier l'input **title** √† la propri√©t√© **task.title** et le textarea **description** √† la propri√©t√© **task.description**.

### üéì Instructions

1. Ouvrez le fichier `src/app/task-form/task-form.component.html`.

2. Remplacez le contenu du fichier par le code suivant¬†:

```html ins={"Liez le titre avec la directive ngModel": 4-5} ins="[(ngModel)]="task.title"" ins={"Liez la description avec la directive ngModel": 8-9} ins="[(ngModel)]="task.description""
// task-form.component.html
<form>
  <label for="title" class="form-label">Titre</label>
    
  <input type="text" id="title" name="title" class="form-control" [(ngModel)]="task.title"/>
    
  <label for="description" class="form-label">Description</label>
    
  <textarea id="description" name="description" class="form-control" [(ngModel)]="task.description"></textarea>
  
  <button type="submit" class="btn btn-primary">Soumettre</button>
</form>
```

En √©tant li√© au formulaire, la variable **task** sera mis √† jour lorsque le formulaire sera mis √† jour.

## ‚úîÔ∏è Ce que vous avez appris

Dans ce chapitre, vous avez appris √† lier un formulaire √† une variable dans Angular. Vous avez appris √† cr√©er une variable **task** pour repr√©senter une t√¢che. Vous avez √©galement appris √† utiliser la directive `[(ngModel)]` pour lier une entr√©e de formulaire √† un mod√®le.

## üîó Ressources

- <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank">Documentation TypeScript: types d'utilitaires</a>
- <a href="https://angular.dev/guide/directives#displaying-and-updating-properties-with-ngmodel" target="_blank">Documentation Angular: ngModel</a>
