---
title: Cr√©ation de service
description: Apprenez √† cr√©er un service avec la CLI Angular
---

import { Steps } from '@astrojs/starlight/components';
import Objective from '../../../../../components/learning-objective.astro';

<Objective class="drop-shadow-xl" objectives={[
{mainTitle: 'Objectifs de ce chapitre', title: 'Cr√©ez un service Angular', description: 'D√©couvrez comment cr√©er un service √† l\'aide de la CLI Angular.'},
]} />

## Etat des lieux

Vous avez 2 composants dans votre application : **TaskFormComponent** et **TaskListComponent**.
Le **TaskFormComponent** est responsable de la cr√©ation de nouvelles t√¢ches.
Le **TaskListComponent** est responsable de l'affichage de la liste des t√¢ches.

Cr√©er une nouvelle t√¢che implique de l'ajouter √† la liste des t√¢ches.
Mais le **TaskFormComponent** et le **TaskListComponent** ne sont pas connect√©s.

Nous avons besoin d'un tiers pour g√©rer les √©l√©ments et les partager entre les deux composants.
C'est l√† qu'interviennent les services Angular !

## Services Angular

Dans Angular, un service est une classe qui peut √™tre utilis√©e pour partager des donn√©es et des fonctionnalit√©s entre diff√©rentes parties de votre application.
Les services sont utilis√©s pour encapsuler la logique qui n'est pas directement li√©e √† un composant sp√©cifique.
C'est notre situation¬†: les t√¢ches ne sont pas directement li√©es au **TaskFormComponent** ou au **TaskListComponent** mais elles sont bien partag√©es par les deux composants.

Pour le reste de ce cours, les services Angular seront notre principal outil d'orchestration pour r√©cup√©rer, cr√©er, mettre √† jour et supprimer des t√¢ches.

Le premier objectif sera de stocker la liste pour la rendre accessible depuis les deux composants.
Par d√©faut, les services Angular sont des singletons. Cela signifie qu'il n'y a qu'une seule instance du service dans l'application.
Tant que vous ne rafra√Æchissez pas votre application, le service **conservera** sa m√©moire.

Comme le routage Angular ne rafra√Æchit pas la page, le service conservera la liste des t√¢ches en m√©moire en basculant entre le **TaskFormComponent** et le **TaskListComponent**.

## Cr√©er un service

Pour cr√©er un service dans Angular, vous pouvez utiliser la CLI Angular.
La commande `ng generate` que vous avez utilis√© pour les composants peut √©galement √™tre utilis√©e pour g√©n√©rer des services.

### üéì Instructions

<Steps>

1. Ex√©cutez la commande suivante dans un terminal¬†:

    ```bash
    ng generate service task
    ```

    ou

    ```bash
    ng g s task
    ```

    Cette commande cr√©era un nouveau fichier appel√© `task.service.ts` dans le dossier `src/app`.

2. Ouvrez le fichier `task.service.ts` et ajoutez une propri√©t√© pour stocker la liste des t√¢ches:

    ```typescript ins={"Importez l\'interface des t√¢ches": 3-4} ins={"importer uuid": 5-6} ins={"Ajoutez la variable des t√¢ches": 12-26}
    // task.service.ts
    import { Injectable } from '@angular/core';

    import { Task } from './models/task.model';

    import { v4 as uuid } from 'uuid';

    @Injectable({
      providedIn: 'root'
    })
    export class TaskService {

         tasks: Task[] = [
                {
                    id: uuid(),
                    title: 'T√¢che 1',
                    description: 'Description de la t√¢che 1',
                    createdAt: new Date()
                },
                {
                    id: uuid(),
                    title: 'T√¢che 2',
                    description: 'Description de la t√¢che 2',
                    createdAt: new Date()
                }
            ];
    }
    ```

</Steps>

Cette liste est exactement celle que nous avons utilis√©e dans le **TaskListComponent** pour afficher les t√¢ches.

## ‚úîÔ∏è Ce que vous avez appris

Dans ce chapitre, vous avez appris √† cr√©er un service avec Angular CLI.
Les services sont utilis√©s pour partager des donn√©es et des fonctionnalit√©s entre diff√©rentes parties de votre application.
Non seulement ils aident √† garder votre code maintenable en respectant le principe DRY (‚ÄúDon't Repeat Yourself‚Äù), mais ils aident √©galement √† garder vos composants propres et concentr√©s sur leur objectif principal.
